<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trading Institute</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Intl Tel Input CSS -->
    <link rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/css/intlTelInput.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ================= HEADER ================= -->
<header class="top-header">
    <div class="container">
        <img src="images/logo.jpg" alt="Logo" class="logo">
    </div>
</header>

<!-- ================= HERO ================= -->
<section class="hero">
    <picture>
        <source media="(max-width:768px)" srcset="images/Banner-Mob-1.png">
        <img src="images/Banner-Web.png" alt="Hero Banner">
    </picture>
    <button class="hero-btn" data-bs-toggle="modal" data-bs-target="#leadFormModal">Learn More</button>
</section>

<!-- ================= KEY FIGURES ================= -->
<section class="key-figures">
    <picture>
        <source media="(max-width:768px)" srcset="images/keyfig-mob.png">
        <img src="images/Frame-Desktop1.png" alt="Key Figures">
    </picture>
</section>

<!-- ================= TESTIMONIALS ================= -->
<section class="testimonials">
    <div class="testimonial-title">
        <picture>
            <source media="(max-width:768px)" srcset="images/testimonials-title-mobile.png">
            <img src="images/testimonials-title-desktop.png" alt="Testimonials">
        </picture>
    </div>

    <div class="main-video">
        <video controls>
            <source src="videos/main.mp4" type="video/mp4">
        </video>
    </div>

    <div class="video-grid">

        <!-- CARD 1 -->
        <div class="video-card" data-video="j3i3f63r8n">
            <img src="images/v1.png" alt="Raman Painulli" class="video-thumb">
            <div class="video-overlay"></div>
            <div class="play-icon">&#9658;</div>
            <div class="video-name">Raman Painulli</div>
        </div>

        <!-- CARD 2 -->
        <div class="video-card" data-video="izym15ke1f">
            <img src="images/v2.png" alt="Parthasarthy" class="video-thumb">
            <div class="video-overlay"></div>
            <div class="play-icon">&#9658;</div>
            <div class="video-name">Parthasarthy</div>
        </div>

        <!-- CARD 3 -->
        <div class="video-card" data-video="cob1higlyi">
            <img src="images/v3.png" alt="Priyesh" class="video-thumb">
            <div class="video-overlay"></div>
            <div class="play-icon">&#9658;</div>
            <div class="video-name">Priyesh</div>
        </div>

        <!-- CARD 4 -->
        <div class="video-card" data-video="mvxxc7tegn">
            <img src="images/v4.png" alt="Jacinto Sims" class="video-thumb">
            <div class="video-overlay"></div>
            <div class="play-icon">&#9658;</div>
            <div class="video-name">Jacinto Sims</div>
        </div>

    </div>


    <div class="testimonial-btn">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#leadFormModal">Join Now</button>
    </div>
</section>

<!-- ================= PERSONALISED ================= -->
<section class="personal-section">
    <div class="personal-title">
        <picture>
            <source media="(max-width:768px)" srcset="images/personal-title-mobile-1.png">
            <img src="images/personal-title-desktop.png" alt="">
        </picture>
    </div>

    <div class="personal-content">
        <picture>
            <source media="(max-width:768px)" srcset="images/personal-content-mobile-1.png">
            <img src="images/personal-content-desktop-1.png" alt="">
        </picture>
    </div>

    <div class="personal-btn">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#leadFormModal">Apply Now</button>
    </div>
</section>

<!-- ================= REVIEWS SECTION ================= -->
<section class="reviews-section">

    <!-- Title -->
    <div class="reviews-title">
        <picture>
            <source media="(max-width:768px)" srcset="images/reviews-title-mob.png">
            <img src="images/reviews-title.png" alt="Reviews Title">
        </picture>
    </div>

    <!-- Cards Wrapper -->
    <div class="reviews-wrapper">

        <!-- CARD 1 -->
        <div class="review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card1.png">
                <img src="images/reviews/desktop/card1.png" alt="">
            </picture>
        </div>

        <!-- CARD 2 -->
        <div class="review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card2.png">
                <img src="images/reviews/desktop/card2.png" alt="">
            </picture>
        </div>

        <!-- CARD 3 -->
        <div class="review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card3.png">
                <img src="images/reviews/desktop/card3.png" alt="">
            </picture>
        </div>

        <!-- CARD 4 -->
        <div class="review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card4.png">
                <img src="images/reviews/desktop/card4.png" alt="">
            </picture>
        </div>

        <!-- Continue same structure till CARD 15 -->

        <!-- CARD 5 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card5.png">
                <img src="images/reviews/desktop/card5.png" alt="">
            </picture>
        </div>

        <!-- CARD 6 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card6.png">
                <img src="images/reviews/desktop/card6.png" alt="">
            </picture>
        </div>

        <!-- CARD 7 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card7.png">
                <img src="images/reviews/desktop/card7.png" alt="">
            </picture>
        </div>

        <!-- CARD 8 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card8.png">
                <img src="images/reviews/desktop/card8.png" alt="">
            </picture>
        </div> 
        
        <!-- CARD 9 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card9.png">
                <img src="images/reviews/desktop/card9.png" alt="">
            </picture>
        </div>

        <!-- CARD 10 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card10.png">
                <img src="images/reviews/desktop/card10.png" alt="">
            </picture>
        </div>

        <!-- CARD 11 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card11.png">
                <img src="images/reviews/desktop/card11.png" alt="">
            </picture>
        </div>

        <!-- CARD 12 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card12.png">
                <img src="images/reviews/desktop/card12.png" alt="">
            </picture>
        </div>

        <!-- CARD 13 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card13.png">
                <img src="images/reviews/desktop/card13.png" alt="">
            </picture>
        </div>

        <!-- CARD 14 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card14.png">
                <img src="images/reviews/desktop/card14.png" alt="">
            </picture>
        </div>

        <!-- CARD 15 -->
        <div class="review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/reviews/mobile/card15.png">
                <img src="images/reviews/desktop/card15.png" alt="">
            </picture>
        </div>
        
    </div>

    <!-- Buttons -->
    <div class="reviews-buttons">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#leadFormModal">Apply Now</button>
        <button id="loadMoreReviews" class="btn-secondary">More Reviews</button>
    </div>

</section>

<!-- ================= JOURNEY ================= -->
<section class="journey-section">
    <div class="journey-title">
        <picture>
            <source media="(max-width:768px)" srcset="images/journey-title-mobile.png">
            <img src="images/journey-title-desktop.png" alt="">
        </picture>
    </div>

    <div class="journey-cards">
        <div class="journey-card">
            <img src="images/journey-card-1.png" alt="">
        </div>
        <div class="journey-card">
            <img src="images/journey-card-2.png" alt="">
        </div>
    </div>
</section>

<!-- ================= GOOGLE REVIEWS SECTION ================= -->
<section class="google-reviews-section">

    <!-- Title -->
    <div class="google-reviews-title">
        <picture>
            <source media="(max-width:768px)" srcset="images/google-reviews-title-mob.png">
            <img src="images/google-reviews-title.png" alt="Google Reviews Title">
        </picture>
    </div>

    <!-- Cards -->
    <div class="google-reviews-wrapper">

        <!-- CARD 1 -->
        <div class="google-review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card1.png">
                <img src="images/google-reviews/desktop/card1.png" alt="">
            </picture>
        </div>

        <!-- CARD 2 -->
        <div class="google-review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card2.png">
                <img src="images/google-reviews/desktop/card2.png" alt="">
            </picture>
        </div>

         <!-- CARD 3 -->
        <div class="google-review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card3.png">
                <img src="images/google-reviews/desktop/card3.png" alt="">
            </picture>
        </div>

        <!-- CARD 4 -->
        <div class="google-review-card">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card4.png">
                <img src="images/google-reviews/desktop/card4.png" alt="">
            </picture>
        </div>

        <!-- Continue same structure till CARD 15 -->

        <!-- CARD 5 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card5.png">
                <img src="images/google-reviews/desktop/card5.png" alt="">
            </picture>
        </div>

        <!-- CARD 6 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card6.png">
                <img src="images/google-reviews/desktop/card6.png" alt="">
            </picture>
        </div>

        <!-- CARD 7 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card7.png">
                <img src="images/google-reviews/desktop/card7.png" alt="">
            </picture>
        </div>

        <!-- CARD 8 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card8.png">
                <img src="images/google-reviews/desktop/card8.png" alt="">
            </picture>
        </div> 
        
        <!-- CARD 9 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card9.png">
                <img src="images/google-reviews/desktop/card9.png" alt="">
            </picture>
        </div>

        <!-- CARD 10 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card10.png">
                <img src="images/google-reviews/desktop/card10.png" alt="">
            </picture>
        </div>

        <!-- CARD 11 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card11.png">
                <img src="images/google-reviews/desktop/card11.png" alt="">
            </picture>
        </div>

        <!-- CARD 12 -->
        <div class="google-review-card hidden">
            <picture>
                <source media="(max-width:768px)" srcset="images/google-reviews/mobile/card12.png">
                <img src="images/google-reviews/desktop/card12.png" alt="">
            </picture>
        </div>

        <!-- Repeat same pattern till CARD 15 -->
        <!-- Keep adding cards -->
        
    </div>

    <!-- Buttons -->
    <div class="google-reviews-buttons">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#leadFormModal">Apply Now</button>
        <button id="googleLoadMoreBtn" class="btn-secondary">More Reviews</button>
    </div>

</section>

<!-- ================= MENTOR ================= -->
<section class="mentor-section">
    <div class="mentor-content">
        <picture>
            <source media="(max-width:768px)" srcset="images/mentor-mobile.png">
            <img src="images/mentor-desktop.png" alt="">
        </picture>
    </div>

    <div class="mentor-btn">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#leadFormModal">Apply Now</button>
    </div>
</section>

<!-- ================= FAQ SECTION ================= -->
<section class="faq-section">

    <!-- Title -->
    <div class="faq-title">
        <picture>
            <source media="(max-width:768px)" srcset="images/faq-title-mobile.png">
            <img src="images/faq-title-desktop.png" alt="FAQ Title">
        </picture>
    </div>

    <!-- FAQ LIST -->
    <div class="faq-wrapper">

        <!-- FAQ ITEM 1 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q1.png">
                    <img src="images/faq/desktop/q1.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a1.png">
                    <img src="images/faq/desktop/a1.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 2 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q2.png">
                    <img src="images/faq/desktop/q2.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a2.png">
                    <img src="images/faq/desktop/a2.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 3 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q3.png">
                    <img src="images/faq/desktop/q3.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a3.png">
                    <img src="images/faq/desktop/a3.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 4 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q4.png">
                    <img src="images/faq/desktop/q4.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a4.png">
                    <img src="images/faq/desktop/a4.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 5 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q5.png">
                    <img src="images/faq/desktop/q5.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a5.png">
                    <img src="images/faq/desktop/a5.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 6 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q6.png">
                    <img src="images/faq/desktop/q6.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a6.png">
                    <img src="images/faq/desktop/a6.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 7 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q7.png">
                    <img src="images/faq/desktop/q7.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a7.png">
                    <img src="images/faq/desktop/a7.png" alt="">
                </picture>
            </div>
        </div>
         <!-- FAQ ITEM 8 -->
        <div class="faq-item">
            <div class="faq-question">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/q8.png">
                    <img src="images/faq/desktop/q8.png" alt="">
                </picture>
                <span class="faq-toggle">+</span>
            </div>
            <div class="faq-answer">
                <picture>
                    <source media="(max-width:768px)" srcset="images/faq/mobile/a8.png">
                    <img src="images/faq/desktop/a8.png" alt="">
                </picture>
            </div>
        </div>
        <!-- Repeat same structure for q2, q3, q4 ... -->
    </div>

    <!-- Video -->
    <div class="faq-video">
        <video controls>
            <source src="videos/faq-video.mp4" type="video/mp4">
        </video>
    </div>

    <!-- Button -->
    <div class="faq-btn">
        <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#leadFormModal">Apply Now</button>
    </div>

</section>

<!-- ================= GALLERY ================= -->
<section class="gallery-section">
    <h2 class="gallery-title">Gallery</h2>

    <div class="gallery-wrapper">
        <button class="gallery-btn prev">&#10094;</button>

        <div class="gallery-track">
            <div class="gallery-card"><img src="images/gallery1.jpg"></div>
            <div class="gallery-card"><img src="images/gallery2.jpeg"></div>
            <div class="gallery-card"><img src="images/gallery3.jpg"></div>
            <div class="gallery-card"><img src="images/gallery4.jpeg"></div>
            <div class="gallery-card"><img src="images/gallery5.jpeg"></div>
            <div class="gallery-card"><img src="images/gallery6.jpeg"></div>
            <div class="gallery-card"><img src="images/gallery7.jpg"></div>
            <div class="gallery-card"><img src="images/gallery8.jpeg"></div>
            <div class="gallery-card"><img src="images/gallery9.jpg"></div>
            <div class="gallery-card"><img src="images/gallery10.jpeg"></div>
            <div class="gallery-card"><img src="images/gallery11.jpeg"></div>
        </div>

        <button class="gallery-btn next">&#10095;</button>
    </div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="site-footer">
    <picture>
        <source media="(max-width:768px)" srcset="images/footer-mobile.png">
        <img src="images/footer-desktop.png" alt="">
    </picture>
</footer>

<div class="modal fade" id="leadFormModal" tabindex="-1" aria-labelledby="leadFormLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <div class="modal-header border-0">
        <h5 class="modal-title" id="leadFormLabel">Please Share Your Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>

      <form id="studentForm" novalidate>
        <div class="modal-body p-4">
          <div class="row g-3">

            <!-- Full Name -->
            <div class="col-12">
              <label class="form-label">Full Name *</label>
              <input type="text" class="form-control" name="fullName"
                     pattern="[A-Za-z\s]+" required>
              <div class="invalid-feedback">
                Please enter a valid name.
              </div>
            </div>

            <!-- WhatsApp -->
            <div class="col-md-6">
              <label class="form-label">WhatsApp Number *</label>
              <input type="tel" class="form-control"
                     id="whatsappNumber"
                     name="whatsappNumber"
                     required>
              <div class="invalid-feedback">
                Please enter a valid WhatsApp number.
              </div>
            </div>

            <!-- Email -->
            <div class="col-md-6">
              <label class="form-label">Email ID *</label>
              <input type="email" class="form-control"
                     name="emailId" required>
              <div class="invalid-feedback">
                Please enter a valid email.
              </div>
            </div>

            <!-- Class Preference -->
            <div class="col-12">
              <label class="form-label">Class Preference *</label>
              <select class="form-select" name="classPref" required>
                <option value="" selected disabled hidden>Select</option>
                <option value="Group">Group</option>
                <option value="Individual">Individual</option>
              </select>
              <div class="invalid-feedback">
                Please select a class preference.
              </div>
            </div>

            <!-- Convenient Time -->
            <div class="col-12">
              <label class="form-label">Convenient Time *</label>
              <input type="text" class="form-control"
                     name="connectTime" required>
              <div class="invalid-feedback">
                Please enter preferred time.
              </div>
            </div>

            <!-- Investment Consent -->
            <div class="col-12">
              <label class="form-label fw-bold">
                I can comfortably make an investment of $2000 to improve my trading skills. *
              </label>
              <select class="form-select"
                      name="investmentConsent" required>
                <option value="" selected disabled hidden>Select</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select>
              <div class="invalid-feedback">
                Please select an option.
              </div>
            </div>

          </div>
        </div>

        <div class="modal-footer border-0 justify-content-center pb-4">
          <button type="submit" class="btn btn-success px-4">
            Submit
          </button>
          <button type="button" class="btn btn-secondary px-4"
                  data-bs-dismiss="modal">
            Close
          </button>
        </div>

      </form>

    </div>
  </div>
</div>

<div id="loader" style="
display:none;
position:fixed;
top:0;left:0;
width:100%;height:100%;
background:#ffffffcc;
z-index:9999;
justify-content:center;
align-items:center;">
  <div class="spinner-border text-primary"></div>
</div>

<div class="modal fade" id="thankYouModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <h4 class="mb-3">Thank You!</h4>
      <p class="mb-4">
        Thank you for your interest.  
        Our team will stay in touch with you.
      </p>
      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
        Close
      </button>
    </div>
  </div>
</div>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Intl Tel Input JS -->
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/intlTelInput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js"></script>

<script>
const track = document.querySelector('.gallery-track');
const nextBtn = document.querySelector('.next');
const prevBtn = document.querySelector('.prev');

nextBtn.addEventListener('click', () => {
    track.scrollBy({ left: track.clientWidth, behavior: 'smooth' });
});

prevBtn.addEventListener('click', () => {
    track.scrollBy({ left: -track.clientWidth, behavior: 'smooth' });
});

// ================= REVIEWS LOAD MORE SYSTEM =================

const loadMoreBtn = document.getElementById('loadMoreReviews');
const reviewCards = document.querySelectorAll('.review-card');

const cardsPerClick = 4;
const initialVisible = 4;

let currentlyVisible = initialVisible;

// Hide all after first 4 on load
function initializeReviews() {
    reviewCards.forEach((card, index) => {
        if (index >= initialVisible) {
            card.style.display = "none";
        }
    });
}

initializeReviews();

loadMoreBtn.addEventListener('click', () => {

    // If not all cards visible → Show next 4
    if (currentlyVisible < reviewCards.length) {

        for (let i = currentlyVisible; i < currentlyVisible + cardsPerClick; i++) {
            if (reviewCards[i]) {
                reviewCards[i].style.display = "block";
            }
        }

        currentlyVisible += cardsPerClick;

        // If all are visible now → change button text
        if (currentlyVisible >= reviewCards.length) {
            loadMoreBtn.textContent = "Less Reviews";
        }

    } 
    // If all are visible → collapse back to first 4
    else {

        reviewCards.forEach((card, index) => {
            if (index >= initialVisible) {
                card.style.display = "none";
            }
        });

        currentlyVisible = initialVisible;
        loadMoreBtn.textContent = "More Reviews";

        // Smooth scroll back to reviews section
        document.querySelector('.reviews-section')
            .scrollIntoView({ behavior: "smooth" });
    }

});

// ================= GOOGLE REVIEWS LOAD SYSTEM =================

const googleBtn = document.getElementById('googleLoadMoreBtn');
const googleCards = document.querySelectorAll('.google-review-card');

const googleCardsPerClick = 4;
const googleInitial = 4;

let googleVisible = googleInitial;

// Hide after first 4
function initializeGoogleReviews() {
    googleCards.forEach((card, index) => {
        if (index >= googleInitial) {
            card.style.display = "none";
        }
    });
}

initializeGoogleReviews();

googleBtn.addEventListener('click', () => {

    if (googleVisible < googleCards.length) {

        for (let i = googleVisible; i < googleVisible + googleCardsPerClick; i++) {
            if (googleCards[i]) {
                googleCards[i].style.display = "block";
            }
        }

        googleVisible += googleCardsPerClick;

        if (googleVisible >= googleCards.length) {
            googleBtn.textContent = "Less Reviews";
        }

    } else {

        googleCards.forEach((card, index) => {
            if (index >= googleInitial) {
                card.style.display = "none";
            }
        });

        googleVisible = googleInitial;
        googleBtn.textContent = "More Reviews";

        document.querySelector('.google-reviews-section')
            .scrollIntoView({ behavior: "smooth" });
    }

});

// ================= FAQ ACCORDION =================

const faqItems = document.querySelectorAll('.faq-item');

faqItems.forEach(item => {

    const question = item.querySelector('.faq-question');
    const answer = item.querySelector('.faq-answer');
    const toggle = item.querySelector('.faq-toggle');

    question.addEventListener('click', () => {

        const isOpen = answer.style.display === "block";

        // Close all first
        document.querySelectorAll('.faq-answer').forEach(a => a.style.display = "none");
        document.querySelectorAll('.faq-toggle').forEach(t => t.textContent = "+");

        if (!isOpen) {
            answer.style.display = "block";
            toggle.textContent = "−";
        }

    });

});

document.addEventListener("DOMContentLoaded", function () {

  const form = document.getElementById("studentForm");
  const loader = document.getElementById("loader");
  const phoneInput = document.querySelector("#whatsappNumber");

  const iti = window.intlTelInput(phoneInput, {
    initialCountry: "auto",
    geoIpLookup: function(callback) {
      fetch("https://ipapi.co/json")
        .then(res => res.json())
        .then(data => callback(data.country_code))
        .catch(() => callback("us"));
    },
    separateDialCode: true,
    preferredCountries: ["ae","in","us","gb"],
  });

  phoneInput.addEventListener("input", function () {
    this.value = this.value.replace(/[^0-9]/g, "");
});

  form.addEventListener("submit", async function (e) {

  e.preventDefault();
  e.stopPropagation();

  // Always trigger Bootstrap validation UI first
  form.classList.add("was-validated");

  let isValid = true;

  // Validate normal HTML fields
  if (!form.checkValidity()) {
    isValid = false;
  }

  // Validate phone using intl-tel-input
  if (!iti.isValidNumber()) {
    phoneInput.classList.add("is-invalid");
    isValid = false;
  } else {
    phoneInput.classList.remove("is-invalid");
  }

  if (!isValid) return;

  loader.style.display = "flex";

  try {

    const formData = new FormData(form);

    const fullName = formData.get("fullName");
    const email = formData.get("emailId");
    const classPref = formData.get("classPref");
    const connectTime = formData.get("connectTime");
    const investmentChoice = formData.get("investmentConsent");
    const whatsappFull = iti.getNumber();
    const pageUrl = window.location.href;

    const nameParts = fullName.trim().split(" ");
    const monthlyIncome = 0;

    /* GOOGLE SHEET */

    const googleData = new URLSearchParams();
    googleData.append("Timestamp", new Date().toLocaleString());
    googleData.append("Page URL", pageUrl);
    googleData.append("Full Name", fullName);
    googleData.append("WhatsApp Number", whatsappFull);
    googleData.append("Email ID", email);
    googleData.append("Class Preference", classPref);
    googleData.append("Connect Time", connectTime);
    googleData.append(
      "Monthly Income",
      investmentChoice === "yes" ? "Yes" : "No"
    );

    fetch("https://script.google.com/macros/s/AKfycbzUSyqwgjhUIRrsLBTZy3woTOKZEkVXHidCvy-2q2stCD0Y7edzrRQLCSdEwp8qFs1V/exec", {
      method: "POST",
      body: googleData
    }).catch(console.error);

    /* WP LOGGER */

    fetch("https://trading.tradewize.ae/wp-admin/admin-ajax.php?action=log_lead_file", {
      method: "POST",
      body: googleData
    }).catch(console.error);

    /* LEAD API (ONLY IF YES) */

    let bookingCode = "";

    if (investmentChoice === "yes") {

      const leadPayload = {
        first_name: nameParts.shift(),
        last_name: nameParts.join(" "),
        country_code: iti.getSelectedCountryData().dialCode,
        phone: phoneInput.value.trim(),
        email: email,
        class_preference: classPref,
        convenient_time: connectTime,
        monthly_income: monthlyIncome
      };

      const response = await fetch(
        "https://leadmanagement.tradewize.ae/api/create_initial_lead.php",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(leadPayload)
        }
      );

      if (!response.ok) throw new Error("Lead API failed");

      const result = await response.json();
      bookingCode = result.booking_code || "";
    }

    loader.style.display = "none";

    /* FINAL FLOW */

    if (investmentChoice === "yes") {
      window.location.href = bookingCode
        ? `/thankyou?code=${bookingCode}`
        : "/thankyou";
    } else {

      bootstrap.Modal.getInstance(
        document.getElementById("leadFormModal")
      ).hide();

      setTimeout(() => {
        new bootstrap.Modal(
          document.getElementById("thankYouModal")
        ).show();
      }, 300);
    }

  } catch (err) {
    console.error(err);
    loader.style.display = "none";
    alert("Submission failed. Please try again.");
  }

});

});
document.querySelectorAll('.video-card').forEach(card => {

    card.addEventListener('click', function () {

        const videoId = this.getAttribute('data-video');

        this.innerHTML = `
            <div class="video-wrapper">
                <iframe src="https://fast.wistia.net/embed/iframe/${videoId}?autoplay=1"
                    allow="autoplay; fullscreen"
                    allowfullscreen>
                </iframe>
            </div>
        `;

    });

});
</script>

</body>
</html>